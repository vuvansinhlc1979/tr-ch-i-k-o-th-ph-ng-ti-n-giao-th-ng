<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Game KÃ©o Tháº£ PhÆ°Æ¡ng Tiá»‡n Giao ThÃ´ng</title>

<style>
:root {
    --accent: #4caf50;
    --accent-dark: #388e3c;
    --panel-bg: #e6f9ee;
}

/* ---------------- Cáº¤U TRÃšC CHUNG ---------------- */
html, body {
    margin: 0;
    padding: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}
body {
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(#cfeefc, #ffffff 60%);
    display: flex;
    flex-direction: column;
    align-items: stretch;
}
header {
    background: #ff9800;
    color: white;
    padding: 14px 10px;
    text-align: center;
    font-size: 26px;
    font-weight: 700;
    letter-spacing: 1px;
}
#game-info {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 12px auto;
}
#score, #timer {
    background: var(--accent);
    color: white;
    padding: 8px 18px;
    border-radius: 12px;
    font-size: 20px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
    min-width: 150px; 
    text-align: center;
}
#game {
    flex: 1;
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 24px;
    padding: 10px 30px;
    box-sizing: border-box;
    overflow-y: auto;
}
.drop-zone {
    width: 360px;
    height: 360px;
    border: 4px dashed var(--accent);
    border-radius: 18px;
    background: rgba(255,255,255,0.9);
    box-shadow: 0 6px 14px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    box-sizing: border-box;
    transition: transform .18s ease, background .18s;
}
.drop-zone h3 {
    margin: 4px 0 10px;
    font-size: 20px;
    color: #0b3d2e;
    display:flex;
    align-items:center;
    gap:8px;
}
.drop-zone.correct { border-color: #00c853; background: #eaffea; }
.drop-zone.wrong { border-color: #e53935; background: #ffecec; }

.slot {
    flex: 1;
    width: 100%;
    display: grid;
    grid-auto-flow: row;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 6px;
    align-content: start;
    justify-items: center;
    padding: 6px;
    box-sizing: border-box;
    overflow-y: auto;
}
#transports {
    display: flex;
    flex-wrap: nowrap;
    gap: 18px;
    justify-content: center;
    align-items: flex-end;
    padding: 18px;
    overflow-x: auto;
    width: 100%;
    box-sizing: border-box;
}
.transport {
    width: 120px;
    cursor: grab;
    user-select: none;
    transition: transform .12s ease, filter 0.3s ease, opacity 0.3s ease;
}
.transport:active { cursor: grabbing; }
.transport.disabled {
    filter: grayscale(100%);
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
}
.slot img {
    width: 72px;
    height: 72px;
    object-fit: contain;
    border-radius: 6px;
}
footer {
    background: #cfeef6;
    padding: 18px;
    box-shadow: 0 -4px 8px rgba(0,0,0,0.04);
}
.guide {
    max-width: 980px;
    margin: 0 auto;
    background: #e8faf0;
    border: 2px solid var(--accent);
    color: #0b3d2e;
    padding: 14px 18px;
    border-radius: 12px;
    font-weight: 600;
    line-height: 1.5;
}

/* ---------------- MÃ€N HÃŒNH GIá»šI THIá»†U (Ä‘Æ°á»£c lÃ m Ä‘áº¹p hÆ¡n) ---------------- */
#start-overlay {
    position: fixed;
    inset: 0;
    background: linear-gradient(145deg, #fff8e1, #ffe0b2);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    text-align: center;
    box-shadow: inset 0 0 60px rgba(0,0,0,0.2);
    transition: opacity 1s ease, transform 1s ease;
}

/* Khung chÃ­nh ná»•i báº­t, cÃ³ hiá»‡u á»©ng 3D */
#intro-box {
    background: linear-gradient(145deg, #ffffff, #fff3cd);
    border: 4px solid #ff9800;
    border-radius: 24px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.3), inset 0 0 15px rgba(255, 152, 0, 0.4);
    padding: 40px 60px;
    max-width: 700px;
    transform: perspective(800px) rotateX(5deg);
    animation: glow 2s infinite alternate;
}

@keyframes glow {
    from { box-shadow: 0 12px 30px rgba(0,0,0,0.3), inset 0 0 15px rgba(255, 152, 0, 0.4); }
    to { box-shadow: 0 16px 40px rgba(0,0,0,0.4), inset 0 0 25px rgba(255, 171, 64, 0.7); }
}

#start-overlay.hidden {
    opacity: 0;
    transform: perspective(800px) rotateY(90deg);
    pointer-events: none;
}
#start-overlay h1 {
    font-size: 40px;
    color: #ff5722;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    margin-bottom: 20px;
}
#start-overlay p {
    font-size: 20px;
    color: #333;
    max-width: 600px;
    line-height: 1.6;
    margin-bottom: 30px;
}
#start-btn {
    background: linear-gradient(135deg, #4caf50, #2e7d32);
    color: white;
    font-size: 22px;
    padding: 14px 50px;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
#start-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 12px 30px rgba(0,0,0,0.4);
}

@media (max-width: 900px) {
    .drop-zone { width: 48%; height: 300px; }
}
@media (max-width: 520px) {
    .drop-zone { width: 100%; height: 260px; }
    .transport { width: 90px; }
}
</style>
</head>

<body>
<!-- PHáº¦N GIá»šI THIá»†U -->
<div id="start-overlay">
  <div id="intro-box">
    <h1>ğŸ® HÆ¯á»šNG DáºªN TRÃ’ CHÆ I ğŸ¯</h1>
    <p>
      ChÃ o má»«ng cÃ¡c báº¡n Ä‘áº¿n vá»›i trÃ² chÆ¡i <strong>"KÃ©o tháº£ phÆ°Æ¡ng tiá»‡n giao thÃ´ng"</strong>!<br><br>
      ğŸš— HÃ£y kÃ©o tá»«ng phÆ°Æ¡ng tiá»‡n vÃ o Ä‘Ãºng loáº¡i Ä‘Æ°á»ng tÆ°Æ¡ng á»©ng (Ä‘Æ°á»ng bá»™, Ä‘Æ°á»ng thá»§y, Ä‘Æ°á»ng khÃ´ng, Ä‘Æ°á»ng sáº¯t).<br>
      âœ… Má»—i hÃ¬nh Ä‘Ãºng báº¡n sáº½ Ä‘Æ°á»£c Ä‘iá»ƒm thÆ°á»Ÿng â€” sai thÃ¬ hÃ¬nh Ä‘Ã³ sáº½ biáº¿n máº¥t!<br><br>
      Khi Ä‘Ã£ sáºµn sÃ ng, nháº¥n <strong>"Báº®T Äáº¦U TRÃ’ CHÆ I"</strong> Ä‘á»ƒ báº¯t Ä‘áº§u nhÃ©!
    </p>
    <button id="start-btn">ğŸš€ Báº®T Äáº¦U TRÃ’ CHÆ I</button>
  </div>
</div>

<header>ğŸ® KÃ‰O THáº¢ PHÆ¯Æ NG TIá»†N GIAO THÃ”NG ğŸ¨</header>
<div id="game-info">
    <div id="score">Äiá»ƒm: 0</div>
    <div id="timer">Thá»i gian: 00:00</div>
</div>

<main id="game">
    <div class="drop-zone" data-type="duongkhong"><h3>âœˆï¸ ÄÆ°á»ng khÃ´ng</h3><div class="slot"></div></div>
    <div class="drop-zone" data-type="duongbo"><h3>ğŸš— ÄÆ°á»ng bá»™</h3><div class="slot"></div></div>
    <div class="drop-zone" data-type="duongthuy"><h3>ğŸš¢ ÄÆ°á»ng thá»§y</h3><div class="slot"></div></div>
    <div class="drop-zone" data-type="duongsat"><h3>ğŸš† ÄÆ°á»ng sáº¯t</h3><div class="slot"></div></div>
</main>

<div id="transports">
    <img src="may bay.png" class="transport" draggable="true" data-type="duongkhong" alt="MÃ¡y bay">
    <img src="kinh khi cau.png" class="transport" draggable="true" data-type="duongkhong" alt="Khinh khÃ­ cáº§u">
    <img src="oto con.png" class="transport" draggable="true" data-type="duongbo" alt="Ã” tÃ´">
    <img src="xe may.png" class="transport" draggable="true" data-type="duongbo" alt="Xe mÃ¡y">
    <img src="xe dap.png" class="transport" draggable="true" data-type="duongbo" alt="Xe Ä‘áº¡p">
    <img src="xe cuu hoa.png" class="transport" draggable="true" data-type="duongbo" alt="Xe cá»©u há»a">
    <img src="xe cuu thuong.png" class="transport" draggable="true" data-type="duongbo" alt="Xe cá»©u thÆ°Æ¡ng">
    <img src="tau ngam.png" class="transport" draggable="true" data-type="duongthuy" alt="TÃ u ngáº§m">
    <img src="tau thuy ok1.png" class="transport" draggable="true" data-type="duongthuy" alt="TÃ u thá»§y">
    <img src="thuyen buom.png" class="transport" draggable="true" data-type="duongthuy" alt="Thuyá»n buá»“m">
    <img src="tau hoa.png" class="transport" draggable="true" data-type="duongsat" alt="TÃ u há»a">
    <img src="tau dien.png" class="transport" draggable="true" data-type="duongsat" alt="TÃ u Ä‘iá»‡n">
</div>

<footer>
    <div class="guide">
        <strong>ğŸ•¹ï¸ HÆ°á»›ng dáº«n:</strong> KÃ©o phÆ°Æ¡ng tiá»‡n vÃ o Ä‘Ãºng Ã´. Náº¿u tháº£ sai, hÃ¬nh Ä‘Ã³ sáº½ bá»‹ áº©n vÃ  khÃ´ng thá»ƒ kÃ©o láº¡i.
    </div>
</footer>

<audio id="correctSound" src="Dung.mp3"></audio>
<audio id="wrongSound" src="Sai.mp3"></audio>

<script>
(function(){
    const overlay = document.getElementById('start-overlay');
    const startBtn = document.getElementById('start-btn');

    // áº¨n toÃ n bá»™ ná»™i dung trÃ² chÆ¡i trÆ°á»›c
    document.querySelectorAll('header, #game-info, main, #transports, footer').forEach(el => {
        el.style.display = 'none';
    });

    startBtn.addEventListener('click', () => {
        overlay.classList.add('hidden');
        setTimeout(() => {
            overlay.style.display = 'none';
            document.querySelectorAll('header, #game-info, main, #transports, footer').forEach(el => {
                el.style.display = '';
            });
            startGame();
        }, 1000);
    });

    function startGame() {
        const transportsContainer = document.getElementById('transports');
        const transports = Array.from(document.querySelectorAll('.transport'));
        const zones = Array.from(document.querySelectorAll('.drop-zone'));
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const correctSound = document.getElementById('correctSound');
        const wrongSound = document.getElementById('wrongSound');
        
        let score = 0;
        const totalTransports = transports.length;
        let time = 0;
        let timerInterval;
        let completedItems = 0;

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                time++;
                timerEl.textContent = `Thá»i gian: ${formatTime(time)}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function endGame() {
            stopTimer();
            const finalMessage = score === totalTransports 
                ? `ğŸ‰ CHÃšC Má»ªNG! Báº¡n Ä‘áº¡t Ä‘iá»ƒm tá»‘i Ä‘a!`
                : `âœ… TRÃ’ CHÆ I Káº¾T THÃšC!`;
            setTimeout(() => {
                alert(`${finalMessage}\n\nÄiá»ƒm sá»‘: ${score}/${totalTransports}\nThá»i gian: ${formatTime(time)}`);
            }, 200);
        }

        startTimer();

        function shuffleArray(array){
            for(let i=array.length-1;i>0;i--){
                const j=Math.floor(Math.random()*(i+1));
                [array[i],array[j]]=[array[j],array[i]];
            }
        }
        shuffleArray(transports);
        transports.forEach(img=>transportsContainer.appendChild(img));

        transports.forEach((img,idx)=>{
            img.dataset.index=idx;
            img.addEventListener('dragstart',e=>{
                if(img.classList.contains('disabled')||img.dataset.placed==="true"){
                    e.preventDefault(); return;
                }
                e.dataTransfer.setData('text/plain',JSON.stringify({index:idx,type:img.dataset.type}));
                setTimeout(()=>img.classList.add('dragging'),0);
            });
            img.addEventListener('dragend',()=>img.classList.remove('dragging'));
        });

        zones.forEach(zone=>{
            zone.addEventListener('dragover',e=>e.preventDefault());
            zone.addEventListener('drop',e=>{
                e.preventDefault();
                const raw=e.dataTransfer.getData('text/plain');
                let payload=null;
                try{payload=JSON.parse(raw);}catch(err){return;}
                if(!payload)return;
                const dragged=transports[payload.index];
                if(!dragged)return;

                if(payload.type===zone.dataset.type&&dragged.dataset.placed!=="true"){
                    const slot=zone.querySelector('.slot');
                    const placedImage=dragged.cloneNode(true);
                    placedImage.classList.remove('transport');
                    placedImage.style.width='72px';
                    placedImage.style.height='72px';
                    placedImage.draggable=false;
                    slot.appendChild(placedImage);

                    dragged.style.display='none';
                    dragged.dataset.placed="true";
                    score++;
                    completedItems++;
                    scoreEl.textContent=`Äiá»ƒm: ${score}`;
                    correctSound.play().catch(()=>{});
                    if(completedItems===totalTransports)endGame();
                }else{
                    wrongSound.play().catch(()=>{});
                    zone.classList.add('wrong');
                    setTimeout(()=>zone.classList.remove('wrong'),600);
                    dragged.classList.add('disabled');
                    dragged.draggable=false;
                    completedItems++;
                    if(completedItems===totalTransports)endGame();
                }
            });
        });
    }
})();
</script>
</body>
</html>
